\chapter{Hamilton's mechanics}
\section{Hamilton's equation}
Now let's recap what we established with the differente pictures of classical mechanics that we discussed until now.
\begin{itemize}
    \item \eleref\;are a set of $n$ differential equations of $2^\circ$ order with $2n$ initial conditions
    \item When a coordinate is cyclic then: \begin{equation}
        p_{\alpha} = \pdv{\lagr}{\dot{q}_{\alpha}}\;\text{is conserved}
    \end{equation}
    but $p_{\alpha}$ is not a quantity of the Lagrangian
    \item even if $p_\alpha$ is conserved we still have $\dot{q}_{\alpha}$ as an "extra" term in the Lagrangian
\end{itemize}
We want to use a space differente from the configuration space in order to get rid of a useless term when a coordinate is cyclic. We then introduce the concept of \textbf{phase space}.\\
Phase space is a $2n$-dimensional space in which each point represents the \underline{state} of the system ${q_{\alpha},p_{\alpha}}$.
Here are the fundamental differences between Lagrange formulation and Hamilton formulation of classical mechanics:
\begin{table}[H]
    \centering
    \begin{tabular}{lll}
        \underline{Lagrange} & $\longrightarrow$ &\underline{Hamilton}\\
        $\lagr=\lagr(q_{\alpha},\dot{q}_{\alpha},t)$ & &$\hamfun=\hamfun(q_{\alpha},p_{\alpha},t)$\\
        Configuration space & &Phase space\\
        $n$ dimensions & &$2n$ dimensions
    \end{tabular}
\end{table}
Since we want to find a new function related to the Lagrangian that contains $p_{\alpha}$ as a variable instead of $\dot{q}_{\alpha}$, we need to introduce a certain type of transformation.\\
\textbf{Legendre transformations} are able to write a function $f(x,y)$ as a function $g(u,y)$ where:
\begin{equation}
    \dd{f} = \underbrace{\pdv{f}{x}}_u \dd{x} + \underbrace{\pdv{f}{y}}_v \dd{y} = u\dd{x} + v\dd{y}
\end{equation}
From this first relation we can work on the term $u\dd{x}$:
\begin{equation}
    \dd{(ux)} = u\dd{x} + x\dd{u} \Rightarrow u\dd{x} = \dd{(ux)} - x\dd{u}
\end{equation}
Then it is easy to see that a function $g = f-ux$ satisfies our conditions and so we have:
\begin{equation}
    \dd{g} = \dd{(f-ux)} = - x\dd{u} + v\dd{y} \Rightarrow \begin{cases}
        \partial_{u} g = -x\\
        \partial_{y} g = v
    \end{cases}
\end{equation}
Let's try to apply Légendre transformations to the Lagrangian:
\begin{equation}
    \dd{\lagr} = \bigsum_{\alpha} \pdv{\lagr}{q_{\alpha}}\dd{q_{\alpha}} + \bigsum_{\alpha} \underbrace{\pdv{\lagr}{\dot{q}_{\alpha}}}_{p_{\alpha}}\dd{\dot{q}_{\alpha}} + \pdv{\lagr}{t}\dd{t}
\end{equation}
We then applied Légendre transformations to $\lagr$:
\begin{equation} \label{e:legendre_hamilton}
    \dd{\brackets{\lagr - \bigsum_{\alpha} p_{\alpha}\dd{\dot{q}_{\alpha}}}} = \bigsum_{\alpha} \pdv{\lagr}{q_{\alpha}}\dd{q_{\alpha}} - \bigsum_{\alpha} \dot{q}_{\alpha}\dd{p_{\alpha}} + \pdv{\lagr}{t}\dd{t}
\end{equation}
And so if we define a function $\hamfun$ called \textbf{Hamiltonian} (or Hamilton function):
\begin{equation}
    \hamfun \defineeq \bigsum_{\alpha} p_{\alpha}\dd{\dot{q}_{\alpha}} -\lagr
\end{equation}
Then \eqref{e:legendre_hamilton} becomes:
\begin{equation}
    \begin{split}
        -\dd{\hamfun} = \bigsum_{\alpha} \underbrace{\pdv{\lagr}{q_{\alpha}}}_{\dot{p}_{\alpha}}\dd{q_{\alpha}} - \bigsum_{\alpha} \dot{q}_{\alpha}\dd{p_{\alpha}} + \pdv{\lagr}{t}\dd{t}\\
        \dd{\hamfun} = -\bigsum_{\alpha} \dot{p}_{\alpha}\dd{q_{\alpha}} + \bigsum_{\alpha} \dot{q}_{\alpha}\dd{p_{\alpha}} - \pdv{\lagr}{t}\dd{t}\\
    \end{split}
\end{equation}
But also it is genrally true that:
\begin{equation}
    \dd{\hamfun} = \bigsum_{\alpha} \pdv{\hamfun}{q_{\alpha}}\dd{q_{\alpha}} + \bigsum_{\alpha} \pdv{\hamfun}{p_{\alpha}}\dd{p_{\alpha}} + \pdv{\hamfun}{t}\dd{t}
\end{equation}
The two equations must be equal so we get \textbf{Hamilton's canonical equations}:
\begin{equation} \label{hamilton_equations}
    \boxed{
    \begin{aligned}
        \pdv{\hamfun}{q_{\alpha}} &= -\dot{p}_{\alpha}\\
        \pdv{\hamfun}{p_{\alpha}} &=\;\;\;\dot{q}_{\alpha}\\
        \pdv{\hamfun}{t} &= -\pdv{\lagr}{t}
    \end{aligned}}
\end{equation}
This is a system of $2n (+1)$ equations, but they are first order ODEs so we have $2n$ initial conditions as in \lagrangeref. With this formulation we have one important advantage: if $q_j$ is cyclic then $\dot{p} = 0$, and we don't need to solve one of the differential equations.
This means that we only need $2n-1$ initial conditions. Same goes for any other cyclic coordinate and so we have $2n-p$ initial conditions with $p$ being the number of cyclic coordinates.\\
Now let's remember the definition of the energy function:
\begin{equation}
    h = \bigsum_{\alpha}\underbrace{\pdv{\lagr}{q_{\alpha}}}_{p_{\alpha}}\dot{q}_{\alpha} - \lagr
\end{equation}
So we can say that the only difference between the energy function $h$ and the Hamiltonian $\hamfun$ is the fact that the first lives in the configuration space, the latter instead lives in the phase space.
To further convince ourselves of this fact we can evaluate the total derivative of $\hamfun$ over time:
\begin{equation}
    \begin{split}
        \dv{\hamfun}{t} &= \bigsum_{\alpha}\underbrace{\pdv{\hamfun}{q_{\alpha}}}_{-\dot{p}_{\alpha}}\dot{q}_{\alpha} + \bigsum_{\alpha}\underbrace{\pdv{\hamfun}{p_{\alpha}}}_{\dot{q}_{\alpha}}\dot{p}_{\alpha} + \pdv{\hamfun}{t} \\
        \dv{\hamfun}{t} &= \pdv{\hamfun}{t} = -\pdv{\lagr}{t}
    \end{split}
\end{equation}
So we get that $\hamfun$ will be the energy and/or will be conserved in the same situations of the energy function.
\section{Hamilton's equations through Hamilton's principle}
To derive \hamiltonref\;we can also exploit \hpquotemath\;starting from:
\begin{equation}
    S = \int_{t_1}^{t_2}\lagr \dd{t}
\end{equation}
Using the same definition for $\hamfun$ that we previously used:
\begin{equation}
    \hamfun = \bigsum_{\alpha}p_{\alpha}\dot{q}_{\alpha} - \lagr
\end{equation}
We get:
\begin{equation} \label{e:deltaS_hamilton}
    \delta S = \int_{t_1}^{t_2}\bbrackets{\bigsum_{\alpha}\delta p_{\alpha}\dot{q}_{\alpha} + \bigsum_{\alpha} p_{\alpha} \underbrace{\delta \dot{q}_{\alpha}}_{\frac{\dd{}}{\dd{t}}\delta q_{\alpha}} - \bigsum_{\alpha} \pdv{\hamfun}{q_{\alpha}} \delta q_{\alpha}- \bigsum_{\alpha} \pdv{\hamfun}{p_{\alpha}} \delta p_{\alpha}} \dd{t}
\end{equation}
We apply the product rule on the second member:
\begin{equation}
    \bigsum_{\alpha} p_{\alpha} \dv{}{t}\delta q_{\alpha} = \bigsum_{\alpha} \bigg[ \dv{}{t}(p_{\alpha} \delta q_{\alpha}) -  \delta q_{\alpha}\dv{}{t}p_{\alpha}\bigg]
\end{equation}
Integrating the first term we get:
\begin{equation}
    \int_{t_1}^{t_2} \bigsum_{\alpha} \dv{}{t}(p_{\alpha} \delta q_{\alpha}) \dd{t} = \bigsum_{\alpha} p_{\alpha} \delta q_{\alpha} \bigg|_{t_1}^{t_2} = 0
\end{equation}
This is zero because in \hpquotemath\;we assumed that the virtual displacement at the extreme points is zero. So we can rewrite \eqref{e:deltaS_hamilton} putting in evidence the common terms:
\begin{equation}
    \begin{split}
        \delta S &= \int_{t_1}^{t_2}\bbrackets{\bigsum_{\alpha}\delta p_{\alpha}\dot{q}_{\alpha} - \bigsum_{\alpha} \delta q_{\alpha}\dot{p}_{\alpha} - \bigsum_{\alpha} \pdv{\hamfun}{q_{\alpha}} \delta q_{\alpha}- \bigsum_{\alpha} \pdv{\hamfun}{p_{\alpha}} \delta p_{\alpha}} \dd{t} \\
        \delta S &= \int_{t_1}^{t_2}\bbrackets{\bigsum_{\alpha}\bigg[\dot{q}_{\alpha} - \pdv{\hamfun}{p_{\alpha}}\bigg] \delta p_{\alpha} - \bigsum_{\alpha} \bigg[\dot{p}_{\alpha} + \pdv{\hamfun}{q_{\alpha}} \bigg]\delta q_{\alpha}} \dd{t} = 0
    \end{split}
\end{equation}
Since all the terms are independent by construction all the brackets must be zero. In this way we get the same set of equation as we did before.
\section{Poisson brackets}
In the context of Hamilton's mechanics we can introduce the notion of the \textbf{Poisson brackets}.\\
Consider two functions $f,g$ in the phase space:
\begin{equation}
    \begin{cases}
        f = f(q_{\alpha},p_{\alpha},t)\\
        g = g(q_{\alpha},p_{\alpha},t)
    \end{cases}
\end{equation}
We define Poisson brackets as follows:
\begin{equation}
    \pb{f}{g} = \bigsum_{\alpha}\brackets{\pdv{f}{q_{\alpha}}\pdv{g}{p_\alpha} - \pdv{f}{p_{\alpha}}\pdv{g}{q_{\alpha}}}
\end{equation}
Notice that $\pb{f}{g}$ is still a function in the phase space.\\
Now we can give some \underline{properties} of the Poisson brackets:
\begin{enumerate}
    \item antisimmetry: \[\pb{f}{g} = - \pb{g}{f}\]
    \item bilinearity:
    \[\pb{\alpha f + \beta g}{h} = \alpha\pb{f}{h}+ \beta\pb{g}{h}\]
    \[\pb{h}{\alpha f + \beta g} = \alpha\pb{h}{f}+ \beta\pb{h}{g}\]
    \item Leibniz rule: \[\pb{f}{gh} = g\pb{f}{h} + \pb{f}{g}h\]
    \item Jacobi identity: \[\pb{f}{\pb{g}{h}} + \pb{h}{\pb{f}{g}} + \pb{g}{\pb{h}{f}} = 0\]
\end{enumerate}
Given this definition let's evaluate the total time derivative of a function $f$ in the phase space:
\begin{equation}
    \dv{f}{t} = \bigsum_{\alpha}\brackets{\pdv{f}{q_{\alpha}}\dot{q}_{\alpha} + \pdv{f}{p_{\alpha}}\dot{p}_{\alpha}} + \pdv{f}{t}
\end{equation}
Using \hamiltonref\;we can rewrite this as:
\begin{equation}
    \begin{split}
        \dv{f}{t} &= \bigsum_{\alpha}\brackets{\pdv{f}{q_{\alpha}}\pdv{\hamfun}{p_{\alpha}} - \pdv{f}{p_{\alpha}}\pdv{\hamfun}{q_{\alpha}}} + \pdv{f}{t}\\
        \dv{f}{t} &= \pb{f}{\hamfun} + \pdv{f}{t}
    \end{split}
\end{equation}
And so we can get a new condition for any generic function $f$ to be a constant of motion:
\begin{equation}
    f\;\text{is conserved} \iff \dv{f}{t} = 0 \iff \pb{f}{\hamfun} = -\pdv{f}{t}
\end{equation}
Furter more if $f$ is independent of time the condition is:
\begin{equation}
    \pb{f}{\hamfun} = 0
\end{equation}
\section{Examples (WIP)}
