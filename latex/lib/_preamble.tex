% Nota: scrivendo draft negli aromenti di document class, si disabilita il rendering di tutti gli ambienti figure. utile per non perdere tempo se non si Ã¨ interessati a verificare questo aspetto.
\documentclass[a4paper,12pt]{book}

\usepackage[italian]{babel}              % Used for italian language
\usepackage{hyperref}                    % Used for hyperlinks
\usepackage{listings}                    % Used for code highlighting
\usepackage{xcolor}                      % Used to define custom colors
\usepackage{graphicx}                    % Used to include images
\usepackage{longtable}                   % Used for breakable tables
\usepackage{amsmath, amssymb}            % Used for math expressions
\usepackage[inkscapeversion=1]{svg}                         % Used to include svg images
\usepackage{ulem} % Provides underline
\usepackage{contour} % Used to add border around text (in our case used to make a custom underline command that doesn't overlap with descenders)

%% IMPOSTAZIONI DEI COLORI
\definecolor{sqlBackground}{RGB}{240, 240, 240}     % Sfondo chiaro
\definecolor{sqlText}{RGB}{0, 0, 0}                 % Testo principale nero
\definecolor{sqlKeyword}{RGB}{0, 0, 150}            % Parole chiave in blu
\definecolor{sqlComment}{RGB}{0, 128, 0}            % Commenti in verde
\definecolor{sqlString}{RGB}{200, 0, 0}             % Stringhe in rosso
\definecolor{sqlNumber}{RGB}{100, 100, 100}         % Numeri di riga in grigio
\definecolor{sqlIdentifier}{RGB}{0, 0, 100}         % Identificatori in blu scuro\


%% COMANDI PERSONALIZZATI
% Definizione dello stile per SQL
\lstdefinestyle{hknsql}{
	language=SQL,
	backgroundcolor=\color{sqlBackground},      % Sfondo chiaro
	basicstyle=\ttfamily\small\color{sqlText},  % Stile di base (testo nero)
	keywordstyle=\color{sqlKeyword}\bfseries,   % Stile delle parole chiave (blu)
	commentstyle=\color{sqlComment}\itshape,    % Stile dei commenti (verde)
	stringstyle=\color{sqlString},              % Stile delle stringhe (rosso)
	numberstyle=\tiny\color{sqlNumber},         % Stile dei numeri di riga (grigio)
	identifierstyle=\color{sqlIdentifier},      % Stile degli identificatori (blu scuro)
	breaklines=true,                            % Wrapping delle righe
	breakautoindent,							% per l'indentazione automatica in caso di a capo
	frame=single,                               % Bordo attorno al codice
	rulecolor=\color{gray},                     % Colore del bordo
	tabsize=4,                                  % Dimensione del tab
	showstringspaces=false,                     % Nasconde gli spazi nelle stringhe
	numbers=left,                               % Numeri di riga a sinistra
	numbersep=5pt,                              % Distanza tra i numeri e il codice
}

\lstdefinestyle{hknc}{
  % Language
  language=C, % Linguaggio
  morekeywords={uint8_t, uint16_t, uint32_t, uint64_t}, % Aggiunta di parole chiave
  % Colorsettings
  basicstyle=\ttfamily\small, % Stile base (dimensione e font)
  keywordstyle=\bfseries\color{blue}, % Stile delle parole chiave
  identifierstyle=\color{black}, % Stile degli identificatori
  commentstyle=\color{green!50!black}, % Stile dei commenti
  stringstyle=\color{red}, % Stile delle stringhe
  numberstyle=\ttfamily\scriptsize\color{gray}, % Stile dei numeri di riga
  % Layout, frame, linenumbers and spacing
  backgroundcolor=\color{white}, % Colore di sfondo
  rulecolor=\color{gray}, % Colore del bordo
  frame=single, % Bordo attorno al codice (single, double, shadowbox, none)
  framerule=0.8pt, % Spessore del bordo
  frameround=tttt,          % Arrotonda tutti gli angoli
  framesep=5pt,             % Distanza tra il bordo e il codice
  rulesep=2pt,              % Distanza tra il bordo e la linea del codice
  numbers=left, % Posizione dei numeri di riga (left, right, none)
  stepnumber=1, % Intervallo tra i numeri di riga
  numbersep=10pt, % Distanza dei numeri di riga dal codice
  boxpos=c,
  %xleftmargin=20pt,
  linewidth= 0.8\linewidth,
  resetmargins= true,
  %aboveskip=5mm, % Spazio sopra il blocco
  %belowskip=5mm, % Spazio sotto il blocco
  numberblanklines = false,
  firstnumber=auto, % Numero di riga iniziale, se due codici condividono la stessa etichetta allora la numerazione continua
  columns=fixed, % Fissa la larghezza delle colonne
  showstringspaces=false, % Mostra gli spazi nelle stringhe
  tabsize=2, % Dimensione dei tabulati
  breaklines=true, % Ritorno a capo automatico per righe lunghe
  breakatwhitespace=true, % Ritorno a capo solo sugli spazi
  breakautoindent = true,
  % other
  escapeinside={(*@}{@*)}, % Comandi LaTeX nel codice
}

\lstdefinestyle{hkn-asm}{
  belowcaptionskip=1\baselineskip,
  frame=L,
  xleftmargin=\parindent,
  language=[x86masm]Assembler,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\itshape\color{purple!40!black},
}

\renewcommand{\ULdepth}{1.8pt} % underline depth
\contourlength{0.8pt}

\newcommand{\myuline}[1]{% better underline
  \uline{\phantom{#1}}%
  \llap{\contour{white}{#1}}%
}

\begin{document}

%TODO: aggiungere altri stili per altri codici

%TODO: creare il comando per l'inserimento automatico della licenza

%TODO:
