% Packages
\usepackage{listings}                    % Code highlighting
\usepackage{xcolor}                      % Custom colors
\usepackage{longtable}                   % Breakable tables
\usepackage{ulem}                        % Underline
\usepackage{contour}                     % Border around text
\usepackage{tcolorbox}                   % Custom boxes
\usepackage[inkscapeversion=1]{svg}      % SVG images with Inkscape

% Color settings
\definecolor{backgroundColor}{RGB}{255, 255, 255}
\definecolor{ruleColor}{RGB}{109, 160, 210}
\definecolor{numberColor}{RGB}{109, 160, 210}
\definecolor{keywordColor}{RGB}{2, 143, 191}
\definecolor{identifierColor}{RGB}{2, 65, 191}
\definecolor{stringColor}{RGB}{8, 30, 50}
\definecolor{commentColor}{RGB}{120, 140, 160}

% Listings style
\lstdefinestyle{hkn}{
  basicstyle=\ttfamily\small,            % Base style (size and font)
  keywordstyle=\bfseries\color{keywordColor}, % Keyword style
  identifierstyle=\color{identifierColor}, % Identifier style
  commentstyle=\color{commentColor},     % Comment style
  stringstyle=\color{stringColor},       % String style
  numberstyle=\ttfamily\scriptsize\color{numberColor}, % Line number style
  backgroundcolor=\color{backgroundColor}, % Background color
  rulecolor=\color{ruleColor},           % Border color
  frame=single,                          % Border around code (single, double, shadowbox, none)
  framerule=0.8pt,                       % Border thickness
  frameround=tttt,                       % Round all corners
  framesep=5pt,                          % Distance between border and code
  rulesep=2pt,                           % Distance between border and code line
  numbers=left,                          % Line number position (left, right, none)
  stepnumber=1,                          % Line number interval
  numbersep=10pt,                        % Distance between line numbers and code
  xleftmargin=30pt,                      % Left margin
  xrightmargin=30pt,                     % Right margin
  resetmargins=true,                     % Reset margins
  numberblanklines=false,                % Number blank lines
  firstnumber=auto,                      % Initial line number
  columns=fixed,                         % Fixed column width
  showstringspaces=false,                % Show spaces in strings
  tabsize=2,                             % Tab size
  breaklines=true,                       % Automatic line break for long lines
  breakatwhitespace=true,                % Line break at whitespace
  breakautoindent=true,                  % Automatic indentation after line break
  escapeinside={(*@}{@*)}                % LaTeX commands in code
}

% Underline settings
\renewcommand{\ULdepth}{1.8pt} % Underline depth
\contourlength{0.8pt}

% Custom underline command
\newcommand{\myuline}[1]{%
  \uline{\phantom{#1}}%
  \llap{\contour{white}{#1}}%
}

% tcolorbox color settings
\definecolor{tcolorboxLeftColor}{RGB}{2, 65, 191}
\definecolor{tcolorboxBackTitleColor}{RGB}{119, 152, 255}
\definecolor{tcolorboxBackColor}{RGB}{210, 226, 255}

% Custom boxes
\newtcolorbox[auto counter, number within=chapter]{exercise}[1]{
  boxrule=0mm,
  leftrule=0.8mm,
  colframe=tcolorboxLeftColor,
  sharp corners=all,
  title={\iflanguage{italian}{Esercizio}{Exercise}~\arabic{\tcbcounter}.~#1},
  colbacktitle=tcolorboxBackTitleColor,
  colback=tcolorboxBackColor,
  fonttitle=\bfseries
}

\newtcolorbox[auto counter, number within=chapter]{definition}[1]{
  boxrule=0mm,
  leftrule=0.8mm,
  colframe=tcolorboxLeftColor,
  sharp corners=all,
  title={\iflanguage{italian}{Definizione}{Definition}~\arabic{\tcbcounter}.~#1},
  colbacktitle=tcolorboxBackTitleColor,
  colback=tcolorboxBackColor,
  fonttitle=\bfseries
}

\newtcolorbox[auto counter, number within=chapter]{observation}[1]{
  boxrule=0mm,
  leftrule=0.8mm,
  colframe=tcolorboxLeftColor,
  sharp corners=all,
  title={\iflanguage{italian}{Osservazione}{Observation}~\arabic{\tcbcounter}.~#1},
  colbacktitle=tcolorboxBackTitleColor,
  colback=tcolorboxBackColor,
  fonttitle=\bfseries
}

\newtcolorbox[auto counter, number within=chapter]{theorem}[1]{
  boxrule=0mm,
  leftrule=0.8mm,
  colframe=tcolorboxLeftColor,
  sharp corners=all,
  title={\iflanguage{italian}{Teorema}{Theorem}~\arabic{\tcbcounter}.~#1},
  colbacktitle=tcolorboxBackTitleColor,
  colback=tcolorboxBackColor,
  fonttitle=\bfseries
}

\newtcolorbox[auto counter, number within=chapter]{corollary}[1]{
  boxrule=0mm,
  leftrule=0.8mm,
  colframe=tcolorboxLeftColor,
  sharp corners=all,
  title={\iflanguage{italian}{Corollario}{Corollary}~\arabic{\tcbcounter}.~#1},
  colbacktitle=tcolorboxBackTitleColor,
  colback=tcolorboxBackColor,
  fonttitle=\bfseries
}

\begin{document}

% TODO: Create command for automatic license insertion

