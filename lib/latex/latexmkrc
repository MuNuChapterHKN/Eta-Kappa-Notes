use File::Find;

# Paths
my $chapters_src = abs_path('chapters');  # source chapters directory
my $build = abs_path('build');  # output directory
my $chapters_build = "$build/chapters";  # build chapters directory

# Ensure build directory exists
mkdir $build unless -d $build;
mkdir $chapters_build unless -d $chapters_build;

# Recursively create subfolders in build/
find(sub {
    return unless -d;  # only directories
    my $rel = File::Spec->abs2rel($File::Find::name, $chapters_src);
    return if $rel eq '.';  # skip root
    mkdir "$chapters_build/$rel" unless -d "$chapters_build/$rel";
}, $chapters_src);
